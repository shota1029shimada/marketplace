# 管理者画面へのアクセス方法

## ステップ1: 管理者アカウントでログインする

### 初期管理者アカウント情報
システムには初期管理者アカウントが設定されています：

- **メールアドレス**: `adminC@example.com`
- **パスワード**: `adminpass`
- **ロール**: ADMIN

### ログイン手順

1. ブラウザでアプリケーションにアクセス
   - 通常は `http://localhost:8080` または設定したポート番号

2. ログインページに移動
   - 未ログインの場合は自動的に `/login` にリダイレクトされます
   - または直接 `/login` にアクセス

3. 管理者アカウントでログイン
   - **メールアドレス**: `adminC@example.com` を入力
   - **パスワード**: `adminpass` を入力
   - 「ログイン」ボタンをクリック

4. ログイン成功後
   - 管理者の場合は自動的に商品一覧画面（`/items`）にリダイレクトされます

---

## ステップ2: 管理者ダッシュボードにアクセスする

ログイン後、以下のいずれかの方法で管理者ダッシュボードにアクセスできます：

### 方法1: ダッシュボードURLに直接アクセス
ブラウザのアドレスバーに以下を入力：
```
http://localhost:8080/dashboard
```

### 方法2: ルートURLからアクセス
ブラウザのアドレスバーに以下を入力：
```
http://localhost:8080/
```
管理者でログインしている場合、自動的に `/admin/users` にリダイレクトされます。

---

## ステップ3: 管理者画面の機能

管理者ダッシュボード（`/dashboard`）から以下の機能にアクセスできます：

### 1. 商品管理 (`/admin/items`)
- すべての商品を一覧表示
- 商品の削除が可能

### 2. ユーザー管理 (`/admin/users`)
- すべてのユーザーを一覧表示
- ユーザーの詳細情報を確認
- ユーザーのBAN（利用停止）機能

### 3. 統計画面 (`/admin/statistics`)
- 売上統計
- 商品統計
- その他の統計情報

---

## 管理者画面の主な機能

### 管理者ダッシュボード (`/dashboard`)
- 最近の出品一覧
- 最近の注文一覧
- 各管理画面へのナビゲーション

### 商品管理 (`/admin/items`)
- 全商品の一覧表示
- 商品の削除機能

### ユーザー管理 (`/admin/users`)
- ユーザー一覧（検索・ソート機能付き）
- ユーザー詳細情報の確認
- ユーザーのBAN機能
- ユーザーの評価情報確認

### 統計画面 (`/admin/statistics`)
- 売上統計
- 商品統計
- その他の統計情報

---

## トラブルシューティング

### 管理者でログインできない場合

1. **データベースを確認**
   - PostgreSQLに接続して、`users`テーブルに管理者ユーザーが存在するか確認：
   ```sql
   SELECT * FROM users WHERE email = 'adminC@example.com';
   ```

2. **管理者ユーザーが存在しない場合**
   - データベースに直接管理者ユーザーを追加：
   ```sql
   INSERT INTO users (name, email, password, role, enabled)
   VALUES ('管理者', 'adminC@example.com', '{noop}adminpass', 'ADMIN', TRUE);
   ```

3. **パスワードが合わない場合**
   - パスワードは `{noop}adminpass` の形式で保存されています
   - `{noop}` はプレフィックスで、プレーンテキストパスワードを意味します
   - ログイン時は `adminpass` のみを入力してください

### 管理者画面にアクセスできない場合

- **403 Forbidden エラーが出る場合**
  - ログインしているユーザーがADMINロールを持っているか確認
  - ログアウトして、管理者アカウントで再度ログインしてください

- **一般ユーザー画面にリダイレクトされる場合**
  - 現在ログインしているユーザーが一般ユーザー（USERロール）の可能性があります
  - 管理者アカウントでログインし直してください

---

## 新しい管理者ユーザーを作成する方法

データベースに直接管理者ユーザーを追加する場合：

```sql
INSERT INTO users (name, email, password, role, enabled)
VALUES ('新しい管理者', 'newadmin@example.com', '{noop}password', 'ADMIN', TRUE);
```

その後、新しいメールアドレスとパスワードでログインできます。
