<!-- HTML5 文書であることを宣言 -->
<!DOCTYPE html>
<!-- ルート要素。言語=日本語、Thymeleaf と Spring Security Dialect を宣言 -->
<html lang="ja" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<!-- ヘッダー領域：メタ情報・タイトル・スタイル読込 -->

<head>
	<!-- 文字コードを UTF-8 に設定 -->
	<meta charset="UTF-8">
	<!-- ブラウザタブに表示されるページタイトル -->
	<title>出品管理 - フリマアプリ</title>
	<!-- 共通スタイルシートの読み込み -->
	<link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<!-- 画面本体開始 -->

<body>
	<!-- レイアウト中央寄せのコンテナ -->
	<div class="container">
		<!-- ページ見出し -->
		<h1>出品管理</h1>
		<!-- ページ説明文 -->
		<p>あなたが出品した商品の一覧です。</p>
		<!-- 主要ナビ（新規出品と戻る） -->
		<div class="main-nav">
			<!-- 新規出品ページへのリンク -->
			<a th:href="@{/items/new}" class="button">新しい商品を出品する</a>
			<!-- マイページに戻るリンク（セカンダリ） -->
			<a th:href="@{/my-page}" class="button secondary">マイページに戻る</a>
		</div>
		<!-- 出品中アイテムのカードグリッド -->
		<div class="item-grid">
			<!-- sellingItems をループして各アイテムカードを表示 -->
			<div class="item-card" th:each="item : ${sellingItems}">
				<!-- 商品詳細へのリンクでカード全体を囲む -->
				<a th:href="@{/items/{id}(id=${item.id})}">
					<!-- 商品画像（なければプレースホルダ） -->
					<img th:src="${item.imageUrl != null ? item.imageUrl :'/images/placeholder.png'}" alt="商品画像">
					<!-- 商品名 -->
					<h3 th:text="${item.name}"></h3>
					<!-- 価格を通貨風（¥＋カンマ区切り）で表示 -->
					<p class="price" th:text="'¥' + ${#numbers.formatDecimal(item.price, 0,'COMMA', 0, 'POINT')}"></p>
					<!-- 出品ステータス（出品中/売却済） -->
					<p class="status" th:text="${item.status}"></p>
				</a>
				<!-- 各カード下の操作ボタン群 -->
				<div class="button-group">
					<!-- 編集画面へのリンク（セカンダリ） -->
					<a th:href="@{/items/{id}/edit(id=${item.id})}" class="button secondary">編集</a>
					<!-- 削除フォーム（POST）。インライン表示で横並び -->
					<form th:action="@{/items/{id}/delete(id=${item.id})}" method="post" style="display:inline;">
						<!-- 確認ダイアログ付きの削除ボタン（危険色） -->
						<button type="submit" class="button danger"
							onclick="return confirm('本当にこの商品を削除しますか？');">削除</button>
					</form>
				</div>
			</div>
			<!-- 出品が 0 件のときの表示 -->
			<div th:if="${#lists.isEmpty(sellingItems)}">
				<!-- 0 件メッセージ -->
				<p>出品中の商品はありません。</p>
			</div>
		</div>
	</div>
</body>

</html>